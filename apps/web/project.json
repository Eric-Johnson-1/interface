{
  "root": "apps/web",
  "sourceRoot": "apps/web/src",
  "projectType": "application",
  "tags": ["scope:web", "type:app"],
  "targets": {
    "build": {
      "executor": "nx:noop",
      "dependsOn": ["prepare", "^build", "build:production"]
    },
    "wait-for-webserver": {
      "executor": "nx:run-commands",
      "options": {
        "command": "wait-on http://localhost:3000 --timeout 120000 --interval 1000 --delay 5000"
      }
    },
    "e2e": {
      "executor": "nx:run-commands",
      "options": {
        "command": "nx playwright:test web",
        "cwd": "{projectRoot}"
      },
      "dependsOn": ["preview:e2e", "wait-for-webserver"]
    },
    "e2e:anvil": {
      "executor": "nx:run-commands",
      "options": {
        "command": "nx playwright:test:anvil web",
        "cwd": "{projectRoot}"
      },
      "dependsOn": ["preview:e2e", "wait-for-webserver"]
    },
    "e2e:no-anvil": {
      "executor": "nx:run-commands",
      "options": {
        "command": "nx playwright:test:no-anvil web",
        "cwd": "{projectRoot}"
      },
      "dependsOn": ["preview:e2e", "wait-for-webserver"]
    },
    "prepare": {
      "executor": "nx:noop",
      "dependsOn": ["ajv"],
      "cache": true,
      "inputs": [],
      "outputs": []
    },
    "ajv": {
      "command": "bun run scripts/compile-ajv-validators.js",
      "options": {
        "cwd": "{projectRoot}"
      },
      "cache": true,
      "inputs": ["{projectRoot}/scripts/compile-ajv-validators.js", "{projectRoot}/package.json"],
      "outputs": ["{projectRoot}/src/utils/__generated__"]
    },
    "graphql:generate": {
      "command": "echo 'GraphQL generation handled by uniswap package'",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "anvil:mainnet": {
      "command": "dotenv -- bash -c './scripts/start-anvil.sh \"https://${REACT_APP_QUICKNODE_ENDPOINT_NAME}.quiknode.pro/${REACT_APP_QUICKNODE_ENDPOINT_TOKEN}\" 8545'",
      "options": {
        "cwd": "{projectRoot}"
      },
      "continuous": true
    },
    "anvil:base": {
      "command": "dotenv -- bash -c './scripts/start-anvil.sh \"https://${REACT_APP_QUICKNODE_ENDPOINT_NAME}.base-mainnet.quiknode.pro/${REACT_APP_QUICKNODE_ENDPOINT_TOKEN}\" 8546'",
      "options": {
        "cwd": "{projectRoot}"
      },
      "continuous": true
    },
    "check:deps:usage": {},
    "check:circular": {
      "command": "bunx madge --circular ./src/pages/App.tsx ./src/setupTests.ts",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "sitemap:generate": {
      "command": "bun run scripts/generate-sitemap.js",
      "options": {
        "cwd": "{projectRoot}"
      },
      "cache": true,
      "inputs": ["sourceFiles"],
      "outputs": [
        "{projectRoot}/public/sitemap.xml",
        "{projectRoot}/public/app-sitemap.xml",
        "{projectRoot}/public/tokens-sitemap.xml",
        "{projectRoot}/public/pools-sitemap.xml",
        "{projectRoot}/public/nfts-sitemap.xml"
      ]
    },
    "start": {
      "command": "vite dev",
      "options": {
        "cwd": "{projectRoot}"
      },
      "continuous": true
    },
    "dev": {
      "command": "vite dev",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "build:production": {
      "command": "NODE_OPTIONS=\"--max-old-space-size=$([ -n \\\"$GITHUB_ACTIONS\\\" ] && echo 32768 || echo 16384)\" CLOUDFLARE_ENV=production vite build",
      "options": {
        "cwd": "{projectRoot}"
      },
      "defaultConfiguration": "production",
      "inputs": ["default", "^production", "!{projectRoot}/build"]
    },
    "build:staging": {
      "command": "NODE_OPTIONS=\"--max-old-space-size=$([ -n \\\"$GITHUB_ACTIONS\\\" ] && echo 32768 || echo 16384)\" VITE_ENABLE_ENTRY_GATEWAY_PROXY=true CLOUDFLARE_ENV=staging vite build --mode staging",
      "options": {
        "cwd": "{projectRoot}"
      },
      "defaultConfiguration": "staging"
    },
    "build:staging:preview": {
      "command": "NODE_OPTIONS=\"--max-old-space-size=$([ -n \\\"$GITHUB_ACTIONS\\\" ] && echo 32768 || echo 16384)\" VITE_ENABLE_ENTRY_GATEWAY_PROXY=true VITE_DISABLE_SOURCEMAP=true CLOUDFLARE_ENV=staging vite build --mode staging",
      "options": {
        "cwd": "{projectRoot}"
      },
      "defaultConfiguration": "staging"
    },
    "build-vercel": {
      "command": "DEPLOY_TARGET=vercel VITE_ENABLE_ENTRY_GATEWAY_PROXY=true NODE_OPTIONS=\"--max-old-space-size=12288\" VITE_DISABLE_SOURCEMAP=true vite build --mode staging && bun scripts/build-vercel.ts",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "build:e2e": {
      "command": "REACT_APP_SKIP_CSP=1 VITE_DISABLE_SOURCEMAP=true nx run web:build:production",
      "options": {
        "cwd": "{projectRoot}"
      },
      "defaultConfiguration": "production",
      "inputs": ["default", "^production", "!{projectRoot}/build"]
    },
    "preview": {
      "command": "vite preview --port 3000",
      "options": {
        "cwd": "{projectRoot}"
      },
      "continuous": true,
      "dependsOn": ["build:production"]
    },
    "preview:staging": {
      "command": "vite preview --port 3000",
      "options": {
        "cwd": "{projectRoot}"
      },
      "continuous": true,
      "dependsOn": ["build:staging:preview"]
    },
    "preview:e2e": {
      "command": "REACT_APP_SKIP_CSP=1 VITE_DISABLE_SOURCEMAP=true vite preview --port 3000",
      "options": {
        "cwd": "{projectRoot}"
      },
      "continuous": true,
      "dependsOn": ["build:e2e"]
    },
    "preview:e2e:no-build": {
      "command": "REACT_APP_SKIP_CSP=1 VITE_DISABLE_SOURCEMAP=true vite preview --port 3000",
      "options": {
        "cwd": "{projectRoot}"
      },
      "continuous": true
    },
    "analyze": {
      "command": "source-map-explorer 'build/assets/*.js' --no-border-checks --gzip",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "lint": {
      "executor": "nx:noop",
      "dependsOn": ["check:circular", "check:deps:usage", "lint:eslint", "lint:biome", "typecheck", "typecheck:cloud"]
    },
    "lint:fix": {},
    "lint:biome": {},
    "lint:biome:fix": {},
    "lint:eslint": {
      "command": "NODE_OPTIONS=--max_old_space_size=8192 eslint --ignore-path .gitignore --cache --cache-location node_modules/.cache/eslint/ --max-warnings=0 .",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "lint:eslint:fix": {
      "command": "NODE_OPTIONS=--max_old_space_size=8192 eslint --ignore-path .gitignore --cache --cache-location node_modules/.cache/eslint/ . --fix",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "playwright:test": {
      "command": "playwright test",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "playwright:test:anvil": {
      "command": "playwright test --grep '\\.anvil\\.'",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "playwright:test:no-anvil": {
      "command": "playwright test --grep-invert '\\.anvil\\.'",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "typecheck": {
      "dependsOn": ["^typecheck", "typecheck:cloud"]
    },
    "typecheck:tsgo": {
      "dependsOn": ["typecheck:cloud"]
    },
    "typecheck:cloud": {
      "command": "tsc -p functions/tsconfig.json",
      "options": {
        "cwd": "{projectRoot}"
      },
      "cache": true,
      "dependsOn": ["^typecheck"],
      "inputs": ["{projectRoot}/functions/**/*.ts"]
    },
    "find:unused": {
      "command": "bash scripts/delete-unused-assets.sh",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "test": {
      "command": "NODE_OPTIONS='--no-deprecation' vitest run",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "test:set1": {
      "command": "NODE_OPTIONS='--no-deprecation' vitest run src/components",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "test:set2": {
      "command": "NODE_OPTIONS='--no-deprecation' vitest run src/pages src/state",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "test:set3": {
      "command": "NODE_OPTIONS='--no-deprecation' vitest run src/hooks src/nft src/utils",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "test:set4": {
      "command": "NODE_OPTIONS='--no-deprecation' vitest run src --exclude 'src/components/**' --exclude 'src/pages/**' --exclude 'src/state/**' --exclude 'src/hooks/**' --exclude 'src/nft/**' --exclude 'src/utils/**'",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "test:watch": {
      "command": "NODE_OPTIONS='--no-deprecation' vitest watch",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "test:bundle": {
      "command": "bun run -r esbuild-register ./src/test-utils/bundle-size-test.ts",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "snapshots": {
      "command": "NODE_OPTIONS='--no-deprecation' vitest run -u",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "test:cloud": {
      "command": "NODE_OPTIONS='--no-deprecation' vitest run functions --config functions/vitest.config.ts",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "deduplicate": {
      "command": "echo 'Bun automatically deduplicates dependencies'",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "storybook:run": {
      "command": "storybook dev -p 6006",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "storybook:run:with-tests": {
      "command": "concurrently -s second -n \"SB RUN,SB TEST WATCH\" -c \"magenta,blue\" \"bun run storybook:run --quiet\" \"wait-on tcp:127.0.0.1:6006 -t 600000 && bun run storybook:test --watch\"",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "storybook:build": {
      "command": "storybook build",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "storybook:test": {
      "command": "test-storybook --excludeTags=\"no-tests\" --testTimeout 60000",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "storybook:test:standalone": {
      "command": "concurrently -k -s first -n \"SB BUILD,SB TEST\" -c \"magenta,blue\" \"bun run storybook:build && http-server storybook-static --port 6006 --silent\" \"wait-on --timeout 600000 tcp:127.0.0.1:6006 && bun run storybook:test --maxWorkers=2\"",
      "options": {
        "cwd": "{projectRoot}"
      }
    }
  }
}
