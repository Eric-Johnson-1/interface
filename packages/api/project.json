{
  "name": "@universe/api",
  "$schema": "../../node_modules/nx/schemas/project-schema.json",
  "sourceRoot": "packages/api/src",
  "projectType": "library",
  "tags": ["scope:api", "type:lib"],
  "targets": {
    "lint:biome": {},
    "lint:biome:fix": {},
    "lint:eslint": {},
    "lint:eslint:fix": {},
    "lint": {},
    "lint:fix": {},
    "typecheck": {},
    "typecheck:tsgo": {},
    "prepare": {
      "executor": "nx:run-commands",
      "options": {
        "commands": ["nx graphql:generate api", "nx tradingapi:generate api"],
        "parallel": false
      },
      "cache": true,
      "inputs": [],
      "outputs": []
    },
    "check:deps:usage": {},
    "test": {
      "command": "vitest run",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "test:coverage": {
      "command": "vitest run --coverage",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "tradingapi:schema": {
      "command": "curl https://trading-api-labs.interface.gateway.uniswap.org/v1/api.json -o ./src/clients/trading/api.json",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "tradingapi:generate:openapi": {
      "command": "openapi --input ./src/clients/trading/api.json --output ./src/clients/trading/__generated__ --useOptions --exportServices true --exportModels true",
      "options": {
        "cwd": "{projectRoot}"
      },
      "cache": true,
      "inputs": ["{projectRoot}/src/clients/trading/api.json"],
      "outputs": ["{projectRoot}/src/clients/trading/__generated__"]
    },
    "tradingapi:generate": {
      "command": "node --no-warnings=ExperimentalWarning --loader ts-node/esm ./scripts/modifyTradingApiTypes.mts",
      "options": {
        "cwd": "{projectRoot}"
      },
      "cache": true,
      "inputs": [
        "{projectRoot}/scripts/modifyTradingApiTypes.mts",
        "{projectRoot}/src/clients/trading/types.ts",
        {
          "runtime": "node -v"
        },
        {
          "dependentTasksOutputFiles": "**/*.ts"
        }
      ],
      "outputs": ["{projectRoot}/src/clients/trading/__generated__/models"],
      "dependsOn": ["tradingapi:generate:openapi"]
    },
    "graphql:schema": {
      "command": "get-graphql-schema https://api.uniswap.org/v1/graphql -h Origin=https://app.uniswap.org > ./src/clients/graphql/schema.graphql",
      "options": {
        "cwd": "{projectRoot}"
      }
    },
    "graphql:generate": {
      "command": "graphql-codegen --config ./src/clients/graphql/codegen.config.ts && node --no-warnings=ExperimentalWarning --loader ts-node/esm ./scripts/fixGraphQLApiTypes.mts",
      "options": {
        "cwd": "{projectRoot}"
      },
      "cache": true,
      "inputs": [
        "{projectRoot}/src/clients/graphql/codegen.config.ts",
        "{projectRoot}/src/**/*.graphql",
        "{projectRoot}/src/**/*.gql",
        "{projectRoot}/scripts/fixGraphQLApiTypes.mts"
      ],
      "outputs": ["{projectRoot}/src/clients/graphql/__generated__"]
    }
  }
}
